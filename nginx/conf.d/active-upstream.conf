# Active upstream - uses variable for dynamic resolution
# This allows nginx to start even if the upstream doesn't exist yet
upstream active_app {
    zone active_app_zone 64k;
    server app_green:3000 max_fails=3 fail_timeout=30s resolve;
    keepalive 32;
}
